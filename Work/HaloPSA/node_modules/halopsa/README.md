# Installation


## NOTE
> You must have a **.npmrc** file in the root of your project to point the NPM client to the correct registry.
>
> This file should be created using these [instructions](https://dev.azure.com/DigitalOriginSolutions/unifi/_artifacts/feed/DigitalOriginSolutions/connect/npm).

Once in place, simply run `npm install haloPSA` in the root directory of your project to install the latest release.
# Basic Usage
---
Create a new instance of the Halo API by using
```typescript
import { haloPSA } from "haloPSA";

const halo = new haloPSA(hostname, client_id, client_secret, tenant);
```
The parameters that need to be passed in to the haloPSA class are described as:
|Parameter Name|Type|Value Description|
|----|----|----|
|hostname|String|The hostname of the target Halo instance. This is the same hostname used in the resource server under **config/integrations/api**.|
|client_id|String|The clientID of the application created in Halo. This can be found under **config/integrations/api/applications** when creating a new application.|
|client_secret|String|The client secret of the application created in Halo. This can be found under **config/integrations/api/applications** when creating a new application.|
|tenant|String|The target tenant to make requests to. This can be found under **config/integrations/api**.|

# Method Documentation
### All of these methods are available in the haloPSA class.

---

### retrieveToken()
Retrives a token from Halo to use the API with the permissions provided to the Application in Halo.
This token expires an hour after creation. During this time, any token retrieval request will return the same access token without requesting a new one from the Halo endpoint.
#### Parameters
This method does not accept any parameters.

#### Returns
Nothing. Assuming the timer had expired, a new token is written to the **accessToken** property.

## Actions
### getActions()
Retrives a token from Halo to use the API with the permissions provided to the Application in Halo.
This token expires an hour after creation. During this time, any token retrieval request will return the same access token without requesting a new one from the Halo endpoint.
#### Parameters
An object possibly contaning these properties.
|Property Name|Type|Value Description|
|----|----|----|
|count|Integer|Number of actions to get|
|ticket_id|Integer|Get actions for a single ticket|
|excludesys|Boolean|exclude system actions|
|conversationonly|Boolean|Only get actions relating to the Agent to End User conversation|
|agentonly|Boolean|Only get actions done by Agents|
|supplieronly|Boolean|Only get actions relating to Suppliers|
|excludeprivate|Boolean|Only get public actions|
|includehtmlnote|Boolean|Include the action note HTML as part of the response|
|includehtmlemail|Boolean|Include the action email HTML as part of the response|
|includeattachments|Boolean|Include attachment details in the response|
|importantonly|Boolean|Only get important actions|
|slaonly|Boolean|query Only get SLA hold and release actions|
|ischildnotes|Boolean|Only get actions from child tickets|
#### Returns
Returns an object if Promise resolves, else returns a string if Promise rejects.

## Software Licenses
### getSoftwareLicenses()
Retrieves a collection of software licenses based on a filter.
#### Parameters
An object possibly contaning these properties. There is no official documentation for this one so good luck..
|Property Name|Type|Value Description|
|----|----|----|
|client_id|Integer|The related client ID|
|count|Integer|The number results to return.|
|paginate|Boolean|Paginate the results to a specific size to allow for synchronistic processing.|
|page_size|Integer|The number of results to return before requiring a request for the next page.|
|page_no|Integer|The index of which page to retrieve of a paginated request.|
|order|String|Accending or decsending|
|orderdesc|String|Absolutely no idea.|
|includedetails|Boolean|Include non-essential detail|
#### Returns
Returns an object containing the record count retrieved and an Array containing a brief version of the licence.

---

### getSoftwareLicense()
Retrieves an individual software license based on ID.
#### Parameters
An object possibly contaning these properties. There is no official documentation for this one so good luck..
|Property Name|Type|Value Description|
|----|----|----|
|id|Integer|The ID of a software license record.|
|client_id|Integer|The ID of the related client.|
|includedetails|Boolean|Include non-essential detail|
#### Returns
Returns an object containing the a detailed version of the requested software license.

---

### updateSoftwareLicense()
Updates an existing or creates a new software license based on details provided.
#### Parameters
An object possibly contaning these properties. There is no official documentation for this one so good luck..
|Property Name|Type|Value Description|
|----|----|----|
|client_id|Integer|The ID of the related client.|
|count|Integer|Number of software licenses to update (citation needed)|
|end_date|Date|A Date object containing the timestamp to conclude the software license contract.|
#### Returns
Returns an object containing the a detailed version of the requested software license.

---

### updateSoftwareLicense()
Updates an existing or creates a new software license based on details provided.
#### Parameters
An object possibly contaning these properties. There is no official documentation for this one so good luck..
|Property Name|Type|Value Description|
|----|----|----|
|client_id|Integer|The ID of the related client.|
|count|Integer|Number of software licenses to update (citation needed)|
|end_date|Date|A Date object containing the timestamp to conclude the software license contract.|
|Licence_roles|Object|An Array of Objects containing the **_temp_id** property representing a role in Halo.
|manufacturer|String|The manufacturer of the license.|
|name|String|A descriptive name of the license.|
|notes|String| Descriptive notes pertaining to the license.|
|purchase_price|Integer|Price|
|site_id|Integer|The ID of the related site.|
|start_date|Date|A Date object containing the timestamp to begin the software license contract.|
|supplier_id|Integer|The ID of the related supplier.|
|type|String|Type of software license. This is arbitrary.|
|x|Any|Any other properties are accepted as this endpoint is officially undocumented.|
#### Returns
Returns an object containing the a detailed version of the requested software license.
